<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Mini TV Box Browser</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: sans-serif;
      background-color: #ffffff;
      display: flex;
      flex-direction: column;
    }
    .browser-bar {
      display: flex;
      gap: 10px;
      padding: 10px;
      box-sizing: border-box;
      background: #f0f0f0;
    }
    input[type="text"] {
      flex: 1;
      padding: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 4px;
      outline: none;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:disabled {
      background-color: #6c757d;
      cursor: not-allowed;
    }
    iframe {
      flex: 1;
      width: 100%;
      border: none;
    }
    .loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: none;
      font-size: 16px;
      color: #333;
    }
  </style>
</head>
<body>

<form id="browser-form">
  <div class="browser-bar">
    <input type="text" id="query" placeholder="Enter URL or Search">
    <button type="submit" id="go-button">Go</button>
  </div>
</form>

<div id="loading" class="loading">Loading...</div>
<iframe id="content-frame" src="about:blank" sandbox="allow-same-origin allow-scripts allow-forms allow-popups"></iframe>

<script>
  const form = document.getElementById('browser-form');
  const queryInput = document.getElementById('query');
  const goButton = document.getElementById('go-button');
  const frame = document.getElementById('content-frame');
  const loading = document.getElementById('loading');

  form.addEventListener('submit', function(event) {
    event.preventDefault();
    let query = queryInput.value.trim();

    if (query) {
      goButton.disabled = true;
      loading.style.display = 'block';

      if (!/^https?:\/\//i.test(query)) {
        query = 'https://' + query;
      }

      try {
        const url = new URL(query);

        if (url.protocol === 'http:' || url.protocol === 'https:') {
          frame.src = url.href;
          frame.onload = () => {
            goButton.disabled = false;
            loading.style.display = 'none';
          };
        } else {
          throw new Error('Invalid protocol');
        }
      } catch (e) {
        // Fallback to DuckDuckGo for iframe-friendly search
        const searchURL = 'https://duckduckgo.com/lite/?q=' + encodeURIComponent(queryInput.value.trim());
        frame.src = searchURL;
        frame.onload = () => {
          goButton.disabled = false;
          loading.style.display = 'none';
        };
      }
    }
  });
</script>

</body>
</html>
